"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[470],{6470:function(e,a,t){t.r(a),t.d(a,{default:function(){return ae}});var s=t(3396);const l={class:"container-xxxl"};function n(e,a,t,n,o,r){const i=(0,s.up)("ViewTitle"),c=(0,s.up)("MonitorLambdaCards");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(i,{title:"람다 모니터링","sub-title":"람다 행동을 모니터링 합니다."}),(0,s.Wm)(c)])}var o=t(7139);const r={class:"card-body p-0"},i={class:"p-4 pb-2"},c={class:"input-group mb-2",role:"group"},d=["onClick"],u=["onClick"],m={key:2,class:"btn btn-secondary",disabled:""},p=(0,s._)("span",{class:"spinner-border spinner-border-sm"},null,-1),b=[p],_={type:"text",class:"form-control bg-white"},g={class:"input-group"},w=["href"],f={type:"text",class:"form-control bg-white"};function h(e,a,t,l,n,p){const h=(0,s.up)("font-awesome-icon"),v=(0,s.up)("MonitorLambdaCarousel");return(0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.lambda_rules,(a=>((0,s.wg)(),(0,s.iD)("div",{key:a[1].rule.arn,class:"card mb-3 w-25"},[(0,s._)("div",r,[(0,s._)("div",i,[(0,s._)("div",c,["ENABLED"===a[1].rule.state?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-secondary",onClick:t=>e.put_update_state_lambda_event_rule(a[1].rule,"DISABLED")},[(0,s.Wm)(h,{class:"fa-fw",icon:"stop"})],8,d)):"DISABLED"===a[1].rule.state?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-secondary",onClick:t=>e.put_update_state_lambda_event_rule(a[1].rule,"ENABLED")},[(0,s.Wm)(h,{class:"fa-fw",icon:"play"})],8,u)):((0,s.wg)(),(0,s.iD)("button",m,b)),(0,s._)("div",_,(0,o.zw)(a[1].rule.name),1)]),(0,s._)("div",g,[(0,s._)("a",{class:"btn btn-secondary",href:"/automation/action?actionSeq="+a[1].action.action_seq},[(0,s.Wm)(h,{class:"fa-fw",icon:"pen-to-square"})],8,w),(0,s._)("div",f,"action : "+(0,o.zw)(a[1].action.name),1)])]),(0,s.Wm)(v,{"lambda-infos":e.lambda_infos},null,8,["lambda-infos"])])])))),128)}var v=t(9242);const y={key:0,class:"w-100 d-flex justify-content-center pb-4"},k=(0,s._)("div",{class:"spinner-border",role:"status"},null,-1),D=[k],C={key:1,id:"carouselExampleControls",class:"carousel carousel-dark slide","data-bs-ride":"carousel","data-bs-interval":"false","data-bs-wrap":"false"},x={class:"carousel-inner w-100 ps-4 pe-4 m-auto"},I=["value","selected"],L={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},E=["src"],M={class:"list-group list-group-flush"},q={class:"list-group-item ps-0 pe-0"},z={class:"list-group-item ps-0 pe-0"},Z={class:"list-group-item ps-0 pe-0 text-truncate"},S=(0,s.Uk)("error : "),W=["title"],R=(0,s._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"prev",style:{width:"1.5rem"}},[(0,s._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"})],-1),j=(0,s._)("button",{class:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleControls","data-bs-slide":"next",style:{width:"1.5rem"}},[(0,s._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"})],-1),A={key:2,class:"fw-light ps-4 pe-4",style:{"font-size":"0.7rem","white-space":"pre-line"}},B=(0,s.Uk)("실행 기록이 없습니다."),U=(0,s._)("br",null,null,-1),V=(0,s.Uk)("Cloudwatch log 를 확인해주세요."),H=[B,U,V];function K(e,a,t,l,n,r){return null===e.lambdaInfos?((0,s.wg)(),(0,s.iD)("div",y,D)):0!==Object.keys(e.lambdaInfos).length?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",x,[(0,s.wy)((0,s._)("select",{class:"form-select form-select-sm mb-3","aria-label":".form-select-sm example","onUpdate:modelValue":a[0]||(a[0]=a=>e.selectedRequestId=a)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.lambdaInfos,((e,a,t)=>((0,s.wg)(),(0,s.iD)("option",{key:a,value:a,selected:0===t},(0,o.zw)(a),9,I)))),128))],512),[[v.bM,e.selectedRequestId]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.lambdaInfos[e.selectedRequestId],((e,a)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,o.C_)(["carousel-item",{"carousel-item active":0===a}]),key:a},[(0,s._)("span",L,(0,o.zw)(a),1),(0,s._)("img",{src:e.img_src,class:"d-block w-100"},null,8,E),(0,s._)("ul",M,[(0,s._)("li",q,"action : "+(0,o.zw)(e.action_name),1),(0,s._)("li",z,"macro : "+(0,o.zw)(e.macro_name),1),(0,s._)("li",Z,[S,(0,s._)("span",{class:"text-danger","data-toggle":"tooltip",title:e.error_name},(0,o.zw)(e.error_name),9,W)])])],2)))),128))]),R,j])):((0,s.wg)(),(0,s.iD)("p",A,H))}var O=(0,s.aZ)({name:"MonitorLambdaCarousel",props:{lambdaInfos:null,width:String,height:String,udid:String},data(){return{selectedRequestId:""}},watch:{lambdaInfos(e){this.selectedRequestId=Object.keys(e)[0]}},methods:{}}),Y=t(89);const N=(0,Y.Z)(O,[["render",K]]);var T=N,F=t(6265),G=t.n(F),J=(0,s.aZ)({name:"MonitorLambdaCards",components:{MonitorLambdaCarousel:T},props:{},data(){return{lambda_rules:null,lambda_infos:null}},async created(){this.get_lambda_event_rules(),this.get_lambda_infos()},methods:{get_lambda_event_rules(){G().get("http://127.0.0.1:8082/api/monitor/appium-lambda/event/rules",{}).then((e=>{const a=new Map;e.data.lambda_rules.forEach((e=>a.set(e.rule.name,e))),this.lambda_rules=a})).catch((e=>console.log(e)))},put_update_state_lambda_event_rule(e,a){const t=e.state;e.state=null;const s=Object.assign({},e);s.state=a,G().put("http://127.0.0.1:8082/api/monitor/appium-lambda/event/rule",s).then((t=>{e.state=a})).catch((a=>{console.log(a),e.state=t}))},get_lambda_infos(){G().get("http://127.0.0.1:8082/api/monitor/appium-lambda/infos",{}).then((e=>{this.lambda_infos=e.data})).catch((e=>{console.log(e)}))}}});const P=(0,Y.Z)(J,[["render",h]]);var Q=P,X=t(3283),$=(0,s.aZ)({name:"MonitorLambdasView",components:{MonitorLambdaCards:Q,ViewTitle:X.Z}});const ee=(0,Y.Z)($,[["render",n]]);var ae=ee}}]);
//# sourceMappingURL=470.7d2d7f42.js.map